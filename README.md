## crate

[![Maven Central](https://maven-badges.herokuapp.com/maven-central/com.github.h908714124/crate/badge.svg)](https://maven-badges.herokuapp.com/maven-central/com.github.h908714124/crate)

This project is for those who think that the builder pattern
is appropriate for <em>updating</em> objects, but less so for <em>creating</em> them.

When an object is constructed via crate, then each step of the generated builder is a proper immutable object,
which is actually generated by [auto-value](https://github.com/google/auto/tree/master/value).
You read that correctly: Every intermediate builder step
is a separate object that's safe to use in a field, or even as a key in a `HashMap`.

If you'd also like a "normal" builder for updating, you may want to combine this with
[auto-builder](https://github.com/h908714124/auto-builder). Here's an example:

#### Example: combining crate and auto-builder

````java
import com.google.auto.value.AutoValue;
import net.autobuilder.AutoBuilder;
import net.crate.AutoCrate;

@AutoBuilder
@AutoCrate
@AutoValue
abstract class Animal {

  abstract String name();
  abstract int numberOfLegs();

  static Animal_Crate builder() {
    return Animal_Crate.builder();
  }

  final Animal_Builder toBuilder() {
    return Animal_Builder.builder(this);
  }
}
````

If you'd rather implement `Animal` by hand, you can combine with
[readable](https://github.com/h908714124/readable) instead. In this case,
you have to use the `@Crate` annotation instead of `@AutoCrate`.

#### Example: combining crate and readable

````java
@Readable
@Crate
final class Animal {

  final String name;
  final int numberOfLegs;

  Animal(String name, int numberOfLegs) {
    this.name = name;
    this.numberOfLegs = numberOfLegs;
  }

  static Animal_Crate builder() {
    return Animal_Crate.builder();
  }

  Animal_Builder toBuilder() {
    return Animal_Builder.builder(this);
  }
}
````

The class must have a non-private constructor for this to work.
If there's more than one non-private constructor, use `@Crate.Constructor` to tag one.

Even if you use `@Crate` everywhere and `@AutoCrate` nowhere,
you still have to include auto-value in your project.
That's because the code that's generated by `@Crate` always depends on it.

#### Dependency warning

````xml
<dependency>
  <groupId>com.github.h908714124</groupId>
  <artifactId>crate</artifactId>
  <version>1.1</version>
  <scope>provided</scope>
</dependency>
````

You have to have at least
[auto-value](https://github.com/google/auto/tree/master/value) in your pom as well.
For the examples above, you'd also need
[readable](https://github.com/h908714124/readable) or
[auto-builder](https://github.com/h908714124/auto-builder).
